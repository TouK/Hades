<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
            http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
       ">

    <!--
    Enable "self-first" class loading (see chapter "SU Classloaders" at
    http://servicemix.apache.org/classloaders.html for details). This way
    Hades can use its own Quartz and not the one contained in lib directory.
    -->
    <classpath inverse="true"/>

    <camelContext id="hadesContext" xmlns="http://camel.apache.org/schema/spring">
        <routeBuilder ref="builder"/>
    </camelContext>

    <bean id="quartz" class="org.apache.camel.component.quartz.QuartzComponent">
        <!-- Configuration for hades quartz cluster, hades-quartz.properties, should be in conf directory of smx3: -->
        <property name="propertiesFile" value="/quartz-hades.properties"/>
        <property name="camelContext" ref="hadesContext"/>
    </bean>

    <bean id="builder" class="pl.touk.hades.camel.HadesRouteBuilder"/>

    <bean id="scheduler" factory-bean="quartz" factory-method="getScheduler"/>

    <!-- Hades configuration file, hades.xml, should be in lib directory of smx3: -->
    <import resource="classpath:hades.xml"/>

</beans>
